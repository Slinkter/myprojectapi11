import{r as a,M as U,j as o,i as A,a as L,P as B,b as _,L as X,S as Y,c,m as q,R as D,B as J,d as Q,e as Z,f as S,g as H}from"./index-6fekZjvE.js";function z(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function ee(...e){return n=>{let t=!1;const s=e.map(i=>{const l=z(i,n);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let i=0;i<s.length;i++){const l=s[i];typeof l=="function"?l():z(e[i],null)}}}}function te(...e){return a.useCallback(ee(...e),e)}class se extends a.Component{getSnapshotBeforeUpdate(n){const t=this.props.childRef.current;if(t&&n.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=t.offsetParent,i=A(s)&&s.offsetWidth||0,l=A(s)&&s.offsetHeight||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=i-r.width-r.left,r.bottom=l-r.height-r.top}return null}componentDidUpdate(){}render(){return this.props.children}}function ne({children:e,isPresent:n,anchorX:t,anchorY:s,root:i,pop:l}){const r=a.useId(),g=a.useRef(null),x=a.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:y}=a.useContext(U),d=e.props?.ref??e?.ref,b=te(g,d);return a.useInsertionEffect(()=>{const{width:u,height:f,top:m,left:C,right:R,bottom:k}=x.current;if(n||l===!1||!g.current||!u||!f)return;const N=t==="left"?`left: ${C}`:`right: ${R}`,M=s==="bottom"?`bottom: ${k}`:`top: ${m}`;g.current.dataset.motionPopId=r;const h=document.createElement("style");y&&(h.nonce=y);const j=i??document.head;return j.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${N}px !important;
            ${M}px !important;
          }
        `),()=>{j.contains(h)&&j.removeChild(h)}},[n]),o.jsx(se,{isPresent:n,childRef:g,sizeRef:x,pop:l,children:l===!1?e:a.cloneElement(e,{ref:b})})}const oe=({children:e,initial:n,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:l,mode:r,anchorX:g,anchorY:x,root:y})=>{const d=L(ie),b=a.useId();let u=!0,f=a.useMemo(()=>(u=!1,{id:b,initial:n,isPresent:t,custom:i,onExitComplete:m=>{d.set(m,!0);for(const C of d.values())if(!C)return;s&&s()},register:m=>(d.set(m,!1),()=>d.delete(m))}),[t,d,s]);return l&&u&&(f={...f}),a.useMemo(()=>{d.forEach((m,C)=>d.set(C,!1))},[t]),a.useEffect(()=>{!t&&!d.size&&s&&s()},[t]),e=o.jsx(ne,{pop:r==="popLayout",isPresent:t,anchorX:g,anchorY:x,root:y,children:e}),o.jsx(B.Provider,{value:f,children:e})};function ie(){return new Map}function re(e=!0){const n=a.useContext(B);if(n===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:i}=n,l=a.useId();a.useEffect(()=>{if(e)return i(l)},[e]);const r=a.useCallback(()=>e&&s&&s(l),[l,s,e]);return!t&&s?[!1,r]:[!0]}const E=e=>e.key||"";function I(e){const n=[];return a.Children.forEach(e,t=>{a.isValidElement(t)&&n.push(t)}),n}const ae=({children:e,custom:n,initial:t=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:l="sync",propagate:r=!1,anchorX:g="left",anchorY:x="top",root:y})=>{const[d,b]=re(r),u=a.useMemo(()=>I(e),[e]),f=r&&!d?[]:u.map(E),m=a.useRef(!0),C=a.useRef(u),R=L(()=>new Map),k=a.useRef(new Set),[N,M]=a.useState(u),[h,j]=a.useState(u);_(()=>{m.current=!1,C.current=u;for(let v=0;v<h.length;v++){const p=E(h[v]);f.includes(p)?(R.delete(p),k.current.delete(p)):R.get(p)!==!0&&R.set(p,!1)}},[h,f.length,f.join("-")]);const T=[];if(u!==N){let v=[...u];for(let p=0;p<h.length;p++){const w=h[p],P=E(w);f.includes(P)||(v.splice(p,0,w),T.push(w))}return l==="wait"&&T.length&&(v=T),j(I(v)),M(u),null}const{forceRender:G}=a.useContext(X);return o.jsx(o.Fragment,{children:h.map(v=>{const p=E(v),w=r&&!d?!1:u===h||f.includes(p),P=()=>{if(k.current.has(p))return;if(k.current.add(p),R.has(p))R.set(p,!0);else return;let $=!0;R.forEach(K=>{K||($=!1)}),$&&(G?.(),j(C.current),r&&b?.(),s&&s())};return o.jsx(oe,{isPresent:w,initial:!m.current||t?void 0:!1,custom:n,presenceAffectsLayout:i,mode:l,root:y,onExitComplete:w?void 0:P,anchorX:g,anchorY:x,children:v},p)})})},F=({count:e=12})=>o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6  gap-6",children:Array.from({length:e}).map((n,t)=>o.jsx(Y,{},t))});F.propTypes={count:c.number};const V=({message:e,icon:n})=>o.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"px-4 py-12 text-center border-2 border-dashed rounded-xl text-muted-foreground border-border/50 bg-muted/20",children:[n&&o.jsx("div",{className:"text-4xl mb-3",children:n}),o.jsx("div",{children:e})]});V.propTypes={message:c.node.isRequired,icon:c.string};const O=({actionType:e,onAction:n,disabled:t})=>{const s=e==="save",i=s?"Add to favourites":"Remove from favourites";return o.jsx("button",{onClick:n,disabled:t,className:S("flex items-center justify-center w-9 h-9 rounded-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary/30",t?"bg-black/50 cursor-not-allowed":"bg-black/70 hover:bg-black text-white active:scale-95"),title:i,"aria-label":i,children:s?t?o.jsx(J,{className:"w-5 h-5 text-red-500"}):o.jsx(Q,{className:"w-5 h-5"}):o.jsx(Z,{className:"w-5 h-5 hover:text-red-500 transition-colors"})})};O.propTypes={actionType:c.oneOf(["save","delete"]).isRequired,onAction:c.func.isRequired,disabled:c.bool.isRequired};const le=D.memo(O),W=({cat:e,onAction:n,actionType:t,disabled:s})=>{const i=H(),l=a.useCallback(b=>{b.preventDefault(),b.stopPropagation(),s||n(e)},[s,n,e]),r=i?"":"transition-all duration-300 hover:shadow-xl hover:-translate-y-1",g=i?"object-cover w-full h-full":"object-cover w-full h-full transition-transform duration-700 group-hover:scale-105",x=i?"absolute inset-0 pointer-events-none":"absolute inset-0 transition-opacity duration-300 opacity-0 from-black/50 via-transparent to-transparent pointer-events-none group-hover:opacity-100",y=i?"absolute top-3 left-3 px-2 py-1 text-[12px] font-mono font-medium tracking-wider text-white bg-black/40 backdrop-blur-sm rounded-md pointer-events-none":"absolute top-3 left-3 px-2 py-1 text-[12px] font-mono font-medium tracking-wider text-white bg-black/40 backdrop-blur-sm rounded-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",d=s||i?"absolute bottom-3 right-3 z-10":"absolute bottom-3 right-3 z-10 transition-opacity duration-300 opacity-0 group-hover:opacity-100";return o.jsxs("div",{className:S("relative overflow-hidden bg-muted rounded-2xl shadow-sm group",r),children:[o.jsxs("div",{className:"relative aspect-square w-full",children:[o.jsx("img",{src:e.url,alt:`Cat ${e.id}`,loading:"lazy",className:g}),o.jsx("div",{className:x})]}),o.jsxs("div",{className:y,children:["ID: ",e.id]}),o.jsx("div",{className:S(d,"transition-opacity duration-300"),children:o.jsx(le,{actionType:t,onAction:l,disabled:s})})]})};W.propTypes={cat:c.shape({id:c.string.isRequired,url:c.string.isRequired}).isRequired,onAction:c.func.isRequired,actionType:c.oneOf(["save","delete"]).isRequired,disabled:c.bool.isRequired};const ce=D.memo(W),de={hidden:e=>({opacity:0,scale:.8,y:20,transition:{delay:e*.05}}),visible:e=>({opacity:1,scale:1,y:0,transition:{delay:e*.05,duration:.3,stiffness:300,damping:25}}),exit:{opacity:0,scale:.5,transition:{duration:.2}}},ue={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},pe=e=>{const n=H(),{title:t,cats:s,onAction:i,actionType:l,isActionDisabled:r,loading:g,emptyStateMessage:x}=e,y=s.length===0,d=!g&&s.length===0,b=n?{hidden:{opacity:1},visible:{opacity:1}}:ue,u=n?{hidden:{opacity:1,scale:1},visible:{opacity:1,scale:1},exit:{opacity:0}}:de;return o.jsxs("section",{className:"w-full mb-12",children:[t&&o.jsx(q.h3,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"pb-2 mb-4 text-xl font-bold border-b text-foreground border-border",children:t}),y?o.jsx(F,{}):d&&x?o.jsx(V,{message:x}):o.jsx(q.div,{layout:!0,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",variants:b,initial:"hidden",animate:"visible",children:o.jsx(ae,{mode:"popLayout",children:s.map((f,m)=>o.jsx(q.div,{layout:!0,custom:m,variants:u,initial:"hidden",animate:"visible",exit:"exit",children:o.jsx(ce,{index:m,cat:f,onAction:i,actionType:l,disabled:r(f)})},f.id))})})]})};pe.propTypes={title:c.string,cats:c.array.isRequired,onAction:c.func.isRequired,actionType:c.oneOf(["save","delete"]).isRequired,isActionDisabled:c.func.isRequired,loading:c.bool.isRequired,emptyStateMessage:c.node};export{pe as C};
